<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.simplecoding.simpledms.mapper.basic.EmpMapper">
    <select id="selectEmpList"
            parameterType="Criteria"
            resultType="Emp">
        SELECT * FROM TB_EMP
        WHERE ENAME LIKE '%'|| #{searchKeyword} ||'%'
        OFFSET #{pageIndex} * #{recordCountPerPage} ROWS
        FETCH NEXT #{recordCountPerPage} ROWS ONLY
    </select>

    <select id="selectEmpListTotCnt"
            parameterType="Criteria"
            resultType="int">
        SELECT COUNT(*) FROM TB_EMP
        WHERE ENAME LIKE '%'|| #{searchKeyword} || '%'
    </select>

    <insert id="insert"
            parameterType="Emp">
        INSERT INTO TB_EMP(
            ENO,
            ENAME,
            JOB,
            MANAGER,
            HIREDATE,
            SALARY,
            COMMISSION,
            DNO
        )
        VALUES(
                  SQ_EMP.NEXTVAL,
                  #{ename},
                  #{job},
                  #{manager},
                  #{hiredate},
                  #{salary},
                  #{commission},
                  #{dno}
              )
    </insert>

    <select id="selectEmp"
            parameterType="int"
            resultType="Emp">
        SELECT * FROM TB_EMP
        WHERE ENO = #{eno}
    </select>

<!--    public int update(Emp emp);-->
    <update id="update"
            parameterType="Emp">
        UPDATE TB_EMP
        SET
            ENAME      = #{ename} ,
            JOB = #{job},
            MANAGER = #{manager},
            HIREDATE = #{hiredate},
            SALARY = #{salary},
            COMMISSION = #{commission},
            DNO = #{dno}
        WHERE ENO = #{eno}
    </update>

    <delete id="delete"
            parameterType="int">
        DELETE TB_EMP WHERE ENO = #{eno}
    </delete>
</mapper>
