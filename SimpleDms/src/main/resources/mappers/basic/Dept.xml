<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.simplecoding.simpledms.mapper.basic.DeptMapper">
    <select id="selectDeptList"
            parameterType="Criteria"
            resultType="Dept">
        SELECT * FROM TB_DEPT
        WHERE DNAME LIKE '%'|| #{searchKeyword} ||'%'
        OFFSET #{pageIndex} * #{recordCountPerPage} ROWS
        FETCH NEXT #{recordCountPerPage} ROWS ONLY
    </select>

    <select id="selectDeptListTotCnt"
            parameterType="Criteria"
            resultType="int">
        SELECT COUNT(*) FROM TB_DEPT
        WHERE DNAME LIKE '%' ||#{searchKeyword}|| '%'
    </select>

    <insert id="insert"
            parameterType="Dept">
        INSERT INTO TB_DEPT(DNO,
                            DNAME,
                            LOC)
        VALUES (SQ_DEPT.NEXTVAL,
                #{dname},
                #{loc})
    </insert>

    <select id="selectDept"
            parameterType="int"
            resultType="Dept">
        SELECT * FROM TB_DEPT
        WHERE DNO = #{dno}
    </select>

    <update id="update"
            parameterType="Dept">
        UPDATE TB_DEPT
        SET
            DNAME=#{dname},
            LOC=#{loc}
        WHERE DNO = #{dno}
    </update>

    <delete id="delete"
            parameterType="int">
        DELETE TB_DEPT WHERE DNO = #{dno}
    </delete>
</mapper>








