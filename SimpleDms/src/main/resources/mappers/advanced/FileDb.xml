<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.simplecoding.simpledms.mapper.advanced.FileDbMapper">
    <select id="selectFileDbList"
            parameterType="Criteria"
            resultType="FileDb">
        SELECT *
        FROM TB_FILE_DB
        WHERE FILE_TITLE LIKE '%' || #{searchKeyword} || '%'
        OFFSET #{pageIndex} * #{recordCountPerPage} ROWS FETCH NEXT #{recordCountPerPage} ROWS ONLY
    </select>

    <select id="selectFileDbListTotCnt"
            parameterType="Criteria"
            resultType="int">
        SELECT COUNT(*)
        FROM TB_FILE_DB
        WHERE FILE_TITLE LIKE '%' || #{searchKeyword} || '%'
    </select>

    <insert id="insert"
            parameterType="FileDb">
        INSERT INTO TB_FILE_DB(UUID,
                               FILE_TITLE,
                               FILE_CONTENT,
                               FILE_DATA,
                               FILE_URL)
        VALUES (#{uuid},
                #{fileTitle},
                #{fileContent},
                #{fileData},
                #{fileUrl})
    </insert>

    <select id="selectFileDb"
            parameterType="String"
            resultType="FileDb">
        SELECT *
        FROM TB_FILE_DB
        WHERE UUID = #{uuid}
    </select>

    <update id="update"
            parameterType="FileDb">
        UPDATE TB_FILE_DB
        SET FILE_TITLE   = #{fileTitle},
            FILE_CONTENT = #{fileContent},
            FILE_DATA    = #{fileData},
            FILE_URL     = #{fileUrl}
        WHERE UUID = #{uuid}
    </update>

    <delete id="delete"
            parameterType="String">
        DELETE
        TB_FILE_DB WHERE UUID = #{uuid}
    </delete>
</mapper>







